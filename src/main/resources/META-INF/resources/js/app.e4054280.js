(function(){"use strict";var t={6256:function(t,n,e){var a=e(5130),r=e(6768);const o={id:"app"};function s(t,n){const e=(0,r.g2)("router-link"),a=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("nav",null,[(0,r.bF)(e,{to:"/"},{default:(0,r.k6)((()=>n[0]||(n[0]=[(0,r.eW)("Home")]))),_:1,__:[0]}),n[4]||(n[4]=(0,r.eW)(" | ")),(0,r.bF)(e,{to:"/generate-qr"},{default:(0,r.k6)((()=>n[1]||(n[1]=[(0,r.eW)("Generate QR")]))),_:1,__:[1]}),n[5]||(n[5]=(0,r.eW)(" | ")),(0,r.bF)(e,{to:"/scan-qr"},{default:(0,r.k6)((()=>n[2]||(n[2]=[(0,r.eW)("Scan QR")]))),_:1,__:[2]}),n[6]||(n[6]=(0,r.eW)(" | ")),(0,r.bF)(e,{to:"/transactions"},{default:(0,r.k6)((()=>n[3]||(n[3]=[(0,r.eW)("Transactions")]))),_:1,__:[3]})]),(0,r.bF)(a)])}var c=e(1241);const i={},l=(0,c.A)(i,[["render",s]]);var u=l,d=e(1387);const m={class:"home"};function f(t,n,e,a,o,s){return(0,r.uX)(),(0,r.CE)("div",m,n[0]||(n[0]=[(0,r.Lk)("h1",null,"Transaction QR Code System",-1),(0,r.Lk)("p",null," Welcome to the transaction management system. Use the navigation to generate or scan QR codes for transactions. ",-1)]))}var k={name:"HomeView"};const h=(0,c.A)(k,[["render",f],["__scopeId","data-v-119d2272"]]);var v=h;const L={class:"generate-qr"},p={class:"form-container"},y={class:"form-group"},g={class:"form-group"},b={class:"form-group"},C={class:"form-group"},T={key:0,class:"qr-container"},_={class:"qr-code"},Q=["src"],w={class:"qr-actions"};function R(t,n,e,o,s,c){return(0,r.uX)(),(0,r.CE)("div",L,[n[13]||(n[13]=(0,r.Lk)("h1",null,"Generate QR Code",-1)),(0,r.Lk)("div",p,[(0,r.Lk)("div",y,[n[7]||(n[7]=(0,r.Lk)("label",{for:"referenceId"},"Reference ID:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"referenceId","onUpdate:modelValue":n[0]||(n[0]=t=>s.transaction.referenceId=t),required:""},null,512),[[a.Jo,s.transaction.referenceId,void 0,{trim:!0}]])]),(0,r.Lk)("div",g,[n[8]||(n[8]=(0,r.Lk)("label",{for:"customerName"},"Customer Name:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"customerName","onUpdate:modelValue":n[1]||(n[1]=t=>s.transaction.customerName=t),required:""},null,512),[[a.Jo,s.transaction.customerName,void 0,{trim:!0}]])]),(0,r.Lk)("div",b,[n[9]||(n[9]=(0,r.Lk)("label",{for:"amount"},"Amount:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"amount","onUpdate:modelValue":n[2]||(n[2]=t=>s.transaction.amount=t),min:"0.01",step:"0.01",required:""},null,512),[[a.Jo,s.transaction.amount,void 0,{number:!0}]])]),(0,r.Lk)("div",C,[n[11]||(n[11]=(0,r.Lk)("label",{for:"status"},"Status:",-1)),(0,r.bo)((0,r.Lk)("select",{id:"status","onUpdate:modelValue":n[3]||(n[3]=t=>s.transaction.status=t),required:""},n[10]||(n[10]=[(0,r.Lk)("option",{value:"",disabled:""},"Select status",-1),(0,r.Lk)("option",{value:"PENDING"},"Pending",-1),(0,r.Lk)("option",{value:"COMPLETED"},"Completed",-1),(0,r.Lk)("option",{value:"FAILED"},"Failed",-1)]),512),[[a.u1,s.transaction.status]])]),(0,r.Lk)("button",{onClick:n[4]||(n[4]=(...t)=>c.generateQR&&c.generateQR(...t)),class:"btn-primary"},"Generate QR")]),s.showQR?((0,r.uX)(),(0,r.CE)("div",T,[n[12]||(n[12]=(0,r.Lk)("h2",null,"Scan this QR Code",-1)),(0,r.Lk)("div",_,[(0,r.Lk)("img",{src:s.qrCodeDataUrl,alt:"QR Code"},null,8,Q)]),(0,r.Lk)("div",w,[(0,r.Lk)("button",{onClick:n[5]||(n[5]=(...t)=>c.downloadQR&&c.downloadQR(...t)),class:"btn-secondary"},"Download QR"),(0,r.Lk)("button",{onClick:n[6]||(n[6]=(...t)=>c.saveTransaction&&c.saveTransaction(...t)),class:"btn-primary"}," Save Transaction ")])])):(0,r.Q3)("",!0)])}var I=e(8420),E=e(4373);const D="/api/transaction";var q={getAllTransactions(){return E.A.get(D)},getTransactionById(t){return E.A.get(`${D}/${t}`)},getTransactionByReferenceId(t){return E.A.get(`${D}/reference/${t}`)},createTransaction(t){return E.A.post(D,t)},updateTransaction(t,n){return E.A.put(`${D}/${t}`,n)},deleteTransaction(t){return E.A.delete(`${D}/${t}`)},processQRTransaction(t){return E.A.post(`${D}/qr-scan`,t)}},S={name:"GenerateQRView",data(){return{transaction:{referenceId:"",customerName:"",amount:null,status:""},qrCodeDataUrl:"",showQR:!1}},methods:{async generateQR(){if(this.transaction.referenceId.trim()&&this.transaction.customerName.trim()&&null!==this.transaction.amount&&!(this.transaction.amount<=0)&&this.transaction.status)try{const t=JSON.stringify(this.transaction);this.qrCodeDataUrl=await I.toDataURL(t),this.showQR=!0}catch(t){console.error("Error generating QR code:",t),alert("Failed to generate QR code")}else alert("Please fill in all required fields with valid data")},downloadQR(){if(!this.qrCodeDataUrl)return;const t=document.createElement("a");t.download=`transaction-${this.transaction.referenceId}.png`,t.href=this.qrCodeDataUrl,document.body.appendChild(t),t.click(),document.body.removeChild(t)},async saveTransaction(){try{const t=await q.createTransaction(this.transaction);alert(`Transaction saved with ID: ${t.data.id}`),this.transaction={referenceId:"",customerName:"",amount:null,status:""},this.qrCodeDataUrl="",this.showQR=!1}catch(t){console.error("Error saving transaction:",t),alert("Failed to save transaction")}}}};const N=(0,c.A)(S,[["render",R],["__scopeId","data-v-2cf93210"]]);var A=N,F=e(4232);const O={class:"scan-qr"},X={class:"scanner-container"},M={key:0},P={key:1,class:"result-container"},U={class:"transaction-details"},$={class:"action-buttons"},V={key:0,class:"error-message"};function j(t,n,e,a,o,s){const c=(0,r.g2)("qrcode-stream");return(0,r.uX)(),(0,r.CE)("div",O,[n[9]||(n[9]=(0,r.Lk)("h1",null,"Scan QR Code",-1)),(0,r.Lk)("div",X,[o.scanned?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",M,[n[2]||(n[2]=(0,r.Lk)("p",null,"Point your camera at a transaction QR code to scan it.",-1)),(0,r.bF)(c,{onDecode:s.onDecode,onInit:s.onInit},null,8,["onDecode","onInit"])])),o.scanned?((0,r.uX)(),(0,r.CE)("div",P,[n[8]||(n[8]=(0,r.Lk)("h2",null,"QR Code Scanned Successfully!",-1)),(0,r.Lk)("div",U,[n[7]||(n[7]=(0,r.Lk)("h3",null,"Transaction Details:",-1)),(0,r.Lk)("table",null,[(0,r.Lk)("tr",null,[n[3]||(n[3]=(0,r.Lk)("td",null,"Reference ID:",-1)),(0,r.Lk)("td",null,(0,F.v_)(o.transaction.referenceId),1)]),(0,r.Lk)("tr",null,[n[4]||(n[4]=(0,r.Lk)("td",null,"Customer Name:",-1)),(0,r.Lk)("td",null,(0,F.v_)(o.transaction.customerName),1)]),(0,r.Lk)("tr",null,[n[5]||(n[5]=(0,r.Lk)("td",null,"Amount:",-1)),(0,r.Lk)("td",null,(0,F.v_)(o.transaction.amount),1)]),(0,r.Lk)("tr",null,[n[6]||(n[6]=(0,r.Lk)("td",null,"Status:",-1)),(0,r.Lk)("td",null,(0,F.v_)(o.transaction.status),1)])])]),(0,r.Lk)("div",$,[(0,r.Lk)("button",{onClick:n[0]||(n[0]=(...t)=>s.processTransaction&&s.processTransaction(...t)),class:"btn-primary"}," Process Transaction "),(0,r.Lk)("button",{onClick:n[1]||(n[1]=(...t)=>s.resetScanner&&s.resetScanner(...t)),class:"btn-secondary"}," Scan Again ")])])):(0,r.Q3)("",!0)]),o.error?((0,r.uX)(),(0,r.CE)("div",V,(0,F.v_)(o.error),1)):(0,r.Q3)("",!0)])}var W=e(7158),x={name:"ScanQRView",components:{QrcodeStream:W.tR},data(){return{transaction:{referenceId:"",customerName:"",amount:0,status:""},scanned:!1,error:"",camera:"auto"}},methods:{async onDecode(t){try{const n=JSON.parse(t);this.transaction={referenceId:n.referenceId||"",customerName:n.customerName||"",amount:n.amount||0,status:n.status||"PENDING"},this.scanned=!0,this.error=""}catch(n){this.error="Invalid QR code format. Please try again.",console.error("Error parsing QR data:",n)}},async processTransaction(){this.error="";try{const t=await q.post("/transactions/process",this.transaction);t.data.success?(alert("Transaction processed successfully!"),this.resetScanner()):this.error=t.data.message||"Failed to process transaction."}catch(t){this.error="Error processing transaction. Please try again.",console.error(t)}},resetScanner(){this.transaction={referenceId:"",customerName:"",amount:0,status:""},this.scanned=!1,this.error=""},onInit(t){t.catch((t=>{this.error="Camera initialization failed.",console.error(t)}))}}};const G=(0,c.A)(x,[["render",j],["__scopeId","data-v-28f8fcf6"]]);var J=G;const B={class:"transactions-view"},H={key:0,class:"loading"},z={key:1,class:"error-message"},K={key:2,class:"transactions-table"},Y=["onClick"],Z=["onClick"],tt={key:3},nt={class:"modal-content"};function et(t,n,e,o,s,c){return(0,r.uX)(),(0,r.CE)("div",B,[n[8]||(n[8]=(0,r.Lk)("h1",null,"Transactions List",-1)),s.loading?((0,r.uX)(),(0,r.CE)("div",H,"Loading transactions...")):(0,r.Q3)("",!0),s.error?((0,r.uX)(),(0,r.CE)("div",z,(0,F.v_)(s.error),1)):(0,r.Q3)("",!0),s.transactions.length?((0,r.uX)(),(0,r.CE)("table",K,[n[2]||(n[2]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Reference ID"),(0,r.Lk)("th",null,"Customer Name"),(0,r.Lk)("th",null,"Amount"),(0,r.Lk)("th",null,"Status"),(0,r.Lk)("th",null,"Actions")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.transactions,(t=>((0,r.uX)(),(0,r.CE)("tr",{key:t.id},[(0,r.Lk)("td",null,(0,F.v_)(t.referenceId),1),(0,r.Lk)("td",null,(0,F.v_)(t.customerName),1),(0,r.Lk)("td",null,(0,F.v_)(t.amount),1),(0,r.Lk)("td",null,(0,F.v_)(t.status),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{onClick:n=>c.viewDetails(t),class:"btn-secondary"},"View",8,Y),(0,r.Lk)("button",{onClick:n=>c.deleteTransaction(t.id),class:"btn-danger"}," Delete ",8,Z)])])))),128))])])):(0,r.Q3)("",!0),s.transactions.length||s.loading?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",tt,"No transactions found.")),s.showModal?((0,r.uX)(),(0,r.CE)("div",{key:4,class:"modal-overlay",onClick:n[1]||(n[1]=(0,a.D$)(((...t)=>c.closeModal&&c.closeModal(...t)),["self"]))},[(0,r.Lk)("div",nt,[n[7]||(n[7]=(0,r.Lk)("h2",null,"Transaction Details",-1)),(0,r.Lk)("table",null,[(0,r.Lk)("tr",null,[n[3]||(n[3]=(0,r.Lk)("td",null,"Reference ID:",-1)),(0,r.Lk)("td",null,(0,F.v_)(s.selectedTransaction.referenceId),1)]),(0,r.Lk)("tr",null,[n[4]||(n[4]=(0,r.Lk)("td",null,"Customer Name:",-1)),(0,r.Lk)("td",null,(0,F.v_)(s.selectedTransaction.customerName),1)]),(0,r.Lk)("tr",null,[n[5]||(n[5]=(0,r.Lk)("td",null,"Amount:",-1)),(0,r.Lk)("td",null,(0,F.v_)(s.selectedTransaction.amount),1)]),(0,r.Lk)("tr",null,[n[6]||(n[6]=(0,r.Lk)("td",null,"Status:",-1)),(0,r.Lk)("td",null,(0,F.v_)(s.selectedTransaction.status),1)])]),(0,r.Lk)("button",{onClick:n[0]||(n[0]=(...t)=>c.closeModal&&c.closeModal(...t)),class:"btn-primary"},"Close")])])):(0,r.Q3)("",!0)])}e(8111),e(2489);var at={name:"TransactionsView",data(){return{transactions:[],loading:!1,error:"",showModal:!1,selectedTransaction:{}}},methods:{async fetchTransactions(){this.loading=!0,this.error="";try{const t=await q.getTransactions();this.transactions=t.data}catch(t){console.error("Failed to fetch transactions:",t),this.error="Failed to load transactions."}finally{this.loading=!1}},viewDetails(t){this.selectedTransaction=t,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedTransaction={}},async deleteTransaction(t){if(confirm("Are you sure you want to delete this transaction?"))try{await q.deleteTransaction(t),this.transactions=this.transactions.filter((n=>n.id!==t)),alert("Transaction deleted successfully.")}catch(n){console.error("Failed to delete transaction:",n),alert("Failed to delete transaction.")}}},mounted(){this.fetchTransactions()}};const rt=(0,c.A)(at,[["render",et],["__scopeId","data-v-d060ce2c"]]);var ot=rt;const st=[{path:"/",name:"home",component:v},{path:"/generate-qr",name:"generate-qr",component:A},{path:"/scan-qr",name:"scan-qr",component:J},{path:"/transactions",name:"transactions",component:ot}],ct=(0,d.aE)({history:(0,d.LA)("/"),routes:st});var it=ct;(0,a.Ef)(u).use(it).mount("#app")}},n={};function e(a){var r=n[a];if(void 0!==r)return r.exports;var o=n[a]={exports:{}};return t[a].call(o.exports,o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(n,a,r,o){if(!a){var s=1/0;for(u=0;u<t.length;u++){a=t[u][0],r=t[u][1],o=t[u][2];for(var c=!0,i=0;i<a.length;i++)(!1&o||s>=o)&&Object.keys(e.O).every((function(t){return e.O[t](a[i])}))?a.splice(i--,1):(c=!1,o<s&&(s=o));if(c){t.splice(u--,1);var l=r();void 0!==l&&(n=l)}}return n}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[a,r,o]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};e.O.j=function(n){return 0===t[n]};var n=function(n,a){var r,o,s=a[0],c=a[1],i=a[2],l=0;if(s.some((function(n){return 0!==t[n]}))){for(r in c)e.o(c,r)&&(e.m[r]=c[r]);if(i)var u=i(e)}for(n&&n(a);l<s.length;l++)o=s[l],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(u)},a=self["webpackChunktransaction_qr_frontend"]=self["webpackChunktransaction_qr_frontend"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=e.O(void 0,[504],(function(){return e(6256)}));a=e.O(a)})();
//# sourceMappingURL=app.e4054280.js.map